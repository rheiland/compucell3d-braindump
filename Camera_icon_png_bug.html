<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="keywords" content="Camera icon png bug,Heiland,Multiwindow images">
<link rel="shortcut icon" href="http://old.compucell3d.org/favicon.ico">
		<title>Camera icon png bug - CompuCell3D Wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/mediawiki1.7/skins/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki1.7/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '/mediawiki1.7/skins';</script>
		<script type="text/javascript" src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/index.js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/mediawiki1.7/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Camera icon png bug</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From CompuCell3D Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>If we simply use the Prefs:Output panel to "Save image...", it 
will faithfully reproduce a .png image that looks like the Main Graphics
 Window (1st image below).  However, if we also click the camera icon 
(at top of graphics window) to save this window's image (to an 
appropriately named subdir in the output dir), it will NOT be a faithful
 reproduction; rather, it tries to rescale the contents and also 
generates a fixed image size (2nd image). (Refer to <a href="http://old.compucell3d.org/mediawiki1.7/index.php/Multiwindow_images" title="Multiwindow images">Multiwindow_images</a> also)
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Fields_cc3d_0006.png" class="image" title="Image:fields_cc3d_0006.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Fields_cc3d_0006.png" alt="Image:fields_cc3d_0006.png" longdesc="/mediawiki1.7/index.php/Image:Fields_cc3d_0006.png" height="398" width="661"></a><br>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0006.png" class="image" title="Image:ExtraField_ScalarField_3D_0_0006.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/ExtraField_ScalarField_3D_0_0006.png" alt="Image:ExtraField_ScalarField_3D_0_0006.png" longdesc="/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0006.png" height="400" width="400"></a>
</p>
<pre>This uses the following test model:

~/dev/Glazier/debug/fields$ ty fields.cc3d 
&lt;Simulation version="3.5.1"&gt;
    &lt;XMLScript&gt;Simulation/fields.xml&lt;/XMLScript&gt;    
    &lt;PythonScript&gt;Simulation/fields.py&lt;/PythonScript&gt; 
    &lt;Resource Type="Python"&gt;Simulation/fields_steppables.py&lt;/Resource&gt;
    &lt;Resource Type="ScalarField"&gt;Simulation/diffusion_2D.pulse.txt&lt;/Resource&gt;
&lt;/Simulation&gt;

 
~/dev/Glazier/debug/fields$ ty Simulation/fields_steppables.py
from PySteppables import *
import CompuCell
import sys


from PlayerPython import *
from math import *

class ExtraFieldVisualizationSteppable(SteppableBasePy):
    def __init__(self,_simulator,_frequency=10):
        SteppableBasePy.__init__(self,_simulator,_frequency)

    def setScalarField(self,_field):
        self.scalarField=_field

    def start(self):pass

    def step(self,mcs):
        clearScalarField(self.dim,self.scalarField)
        for x in xrange(self.dim.x):
            for y in xrange(self.dim.y):
                for z in xrange(self.dim.z):
                    value = y+mcs
                    fillScalarValue(self.scalarField, x,y,z,value)


...other classes too...
</pre>
<p>Where does all this code live?
</p>
<pre>~/dev/Glazier/cc3d-git-8-27-12/player$ grep outputScreenshots */*/*.py
Plugins/ViewManagerPlugins/ScreenshotManager.py:    def outputScreenshots(self,_generalScreenshotDirectoryName,_mcs):  # called from SimpleTabView:handleCompletedStep{Regular,CML*}
Plugins/ViewManagerPlugins/ScreenshotManager.py:#        print MODULENAME, 'outputScreenshots():  _generalScreenshotDirectoryName=',_generalScreenshotDirectoryName
Plugins/ViewManagerPlugins/ScreenshotManager.py:        print MODULENAME,'outputScreenshots(): type(winsize), [0],[1]=',type(winsize),winsize[0],winsize[1]
Plugins/ViewManagerPlugins/ScreenshotManager.py:#        print MODULENAME,'outputScreenshots(): dir(self.screenshotGraphicsWidget.qvtkWidget)=',dir(self.screenshotGraphicsWidget.qvtkWidget)
Plugins/ViewManagerPlugins/ScreenshotManager.py:#        print MODULENAME,'outputScreenshots(): dir(self.screenshotGraphicsWidget.qvtkWidget.GetRenderWindow())=',dir(self.screenshotGraphicsWidget.qvtkWidget.GetRenderWindow())
Plugins/ViewManagerPlugins/ScreenshotManager.py:        print MODULENAME,'outputScreenshots(): self.screenshotGraphicsWidget.qvtkWidget.GetRenderWindow().GetSize()=',self.screenshotGraphicsWidget.qvtkWidget.GetRenderWindow().GetSize()
Plugins/ViewManagerPlugins/ScreenshotManager.py:#        print MODULENAME,'outputScreenshots(): win size=',  self.tabViewWidget.mainGraphicsWindow.size() # PyQt4.QtCore.QSize(367, 378)
Plugins/ViewManagerPlugins/ScreenshotManager.py:            print MODULENAME,'outputScreenshots(): scrName =',scrName  # e.g. FGF_ConField_2D_XY_0  (i.e. subdir name)
Plugins/ViewManagerPlugins/ScreenshotManager.py:            print MODULENAME,'outputScreenshots(): scrData.screenshotGraphicsWidget.size().width(), height() =',scrData.screenshotGraphicsWidget.size().width(),scrData.screenshotGraphicsWidget.size().height()  # 100,30&nbsp;?!
Plugins/ViewManagerPlugins/ScreenshotManager.py:#            print MODULENAME,'outputScreenshots(): scrData.spaceDimension =',scrData.spaceDimension  # 2D
Plugins/ViewManagerPlugins/SimpleTabView.py:            self.screenshotManager.outputScreenshots(self.screenshotDirectoryName,self.__step)
Plugins/ViewManagerPlugins/SimpleTabView.py:            self.screenshotManager.outputScreenshots(self.screenshotDirectoryName,self.__step)
</pre>
<p>I think I've fixed this problem (at least to some degree).  If we now
 pan/zoom/rotate(if 3D) the player graphics window to the desired 
orientation and then click the camera icon (top border of graphics 
window), it should save images rendered using this  orientation (and 
window size).
</p><p>For example, if we have the following situation (using the 
model/steppable from above) and click the camera icon, the correctly 
rendered images (below) should be dumped.  (After clicking the camera 
icon, one could then select a different field and click the camera icon 
for that, etc).
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:ExtraFields_player_win.png" class="image" title="Image:ExtraFields_player_win.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/ExtraFields_player_win.png" alt="Image:ExtraFields_player_win.png" longdesc="/mediawiki1.7/index.php/Image:ExtraFields_player_win.png" height="600" width="785"></a><br>
</p><p>this results in the following images being saved (in ~/CC3DWorkspace/&lt;modelname-datetimestamp&gt;/&lt;fieldname...&gt;/*.png:
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0001.png" class="image" title="Image:ExtraField_ScalarField_3D_0_0001.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/ExtraField_ScalarField_3D_0_0001.png" alt="Image:ExtraField_ScalarField_3D_0_0001.png" longdesc="/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0001.png" height="400" width="500"></a>
<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0002.png" class="image" title="Image:ExtraField_ScalarField_3D_0_0002.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/ExtraField_ScalarField_3D_0_0002.png" alt="Image:ExtraField_ScalarField_3D_0_0002.png" longdesc="/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0002.png" height="400" width="500"></a>
<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0003.png" class="image" title="Image:ExtraField_ScalarField_3D_0_0003.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/ExtraField_ScalarField_3D_0_0003.png" alt="Image:ExtraField_ScalarField_3D_0_0003.png" longdesc="/mediawiki1.7/index.php/Image:ExtraField_ScalarField_3D_0_0003.png" height="400" width="500"></a>
</p><p>Notice that the very first image saved will most likely be 
incorrect, in the sense that it will be automatically re-scaled, but the
 rest should retain the orientation used in the player graphics window.
</p><p>We should note that once the camera icon has been clicked for a 
field, it is not possible to change anything in that graphics window and
 then re-click the camera icon to override the previous.  Future work...
</p><p>Similarly, we show how we change to the Cell_Field, view it as a 
3D projection (rotated/zoomed/panned) and click the camera icon to save 
those images, then switch to a 2D projection (XY) (zoomed/panned) and 
click the camera icon to save those images:
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Cell_Field_CellField_3D_1_0004.png" class="image" title="Image:Cell_Field_CellField_3D_1_0004.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Cell_Field_CellField_3D_1_0004.png" alt="Image:Cell_Field_CellField_3D_1_0004.png" longdesc="/mediawiki1.7/index.php/Image:Cell_Field_CellField_3D_1_0004.png" height="400" width="500"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Cell_Field_CellField_3D_1_0005.png" class="image" title="Image:Cell_Field_CellField_3D_1_0005.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Cell_Field_CellField_3D_1_0005.png" alt="Image:Cell_Field_CellField_3D_1_0005.png" longdesc="/mediawiki1.7/index.php/Image:Cell_Field_CellField_3D_1_0005.png" height="400" width="500"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Cell_Field_CellField_3D_1_0006.png" class="image" title="Image:Cell_Field_CellField_3D_1_0006.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Cell_Field_CellField_3D_1_0006.png" alt="Image:Cell_Field_CellField_3D_1_0006.png" longdesc="/mediawiki1.7/index.php/Image:Cell_Field_CellField_3D_1_0006.png" height="400" width="500"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Cell_Field_CellField_2D_XY_5_0005.png" class="image" title="Image:Cell_Field_CellField_2D_XY_5_0005.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Cell_Field_CellField_2D_XY_5_0005.png" alt="Image:Cell_Field_CellField_2D_XY_5_0005.png" longdesc="/mediawiki1.7/index.php/Image:Cell_Field_CellField_2D_XY_5_0005.png" height="400" width="500"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Cell_Field_CellField_2D_XY_5_0006.png" class="image" title="Image:Cell_Field_CellField_2D_XY_5_0006.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Cell_Field_CellField_2D_XY_5_0006.png" alt="Image:Cell_Field_CellField_2D_XY_5_0006.png" longdesc="/mediawiki1.7/index.php/Image:Cell_Field_CellField_2D_XY_5_0006.png" height="400" width="500"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Cell_Field_CellField_2D_XY_5_0007.png" class="image" title="Image:Cell_Field_CellField_2D_XY_5_0007.png"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/Cell_Field_CellField_2D_XY_5_0007.png" alt="Image:Cell_Field_CellField_2D_XY_5_0007.png" longdesc="/mediawiki1.7/index.php/Image:Cell_Field_CellField_2D_XY_5_0007.png" height="400" width="500"></a>
</p><p>Note that are issues with turning on cell borders (Vis menu) for 
the 2D projection and also having that apply to the 3D rendering.
</p><p><br>
</p>
<hr>
<li>Back to <a href="http://old.compucell3d.org/mediawiki1.7/index.php/Heiland" title="Heiland">Heiland</a>

<!-- Saved in parser cache with key wikidb:pcache:idhash:483-0!1!0!0!!en!2 and timestamp 20130212211411 -->
<div class="printfooter">
Retrieved from "<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Camera_icon_png_bug">http://old.compucell3d.org/mediawiki1.7/index.php/Camera_icon_png_bug</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</li></div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a title="View the content page [control-c]" accesskey="c" href="http://old.compucell3d.org/mediawiki1.7/index.php/Camera_icon_png_bug">Article</a></li>
				 <li id="ca-talk" class="new"><a title="Discussion about the content page [control-t]" accesskey="t" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Talk:Camera_icon_png_bug&amp;action=edit">Discussion</a></li>
				 <li id="ca-edit"><a title="You can edit this page. Please use the preview button before saving. [control-e]" accesskey="e" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Camera_icon_png_bug&amp;action=edit">Edit</a></li>
				 <li id="ca-history"><a title="Past versions of this page. [control-h]" accesskey="h" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Camera_icon_png_bug&amp;action=history">History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a title="You are encouraged to log in, it is not mandatory however. [control-o]" accesskey="o" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Userlogin&amp;returnto=Camera_icon_png_bug">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div title="Main Page" class="portlet" id="p-logo">
		<a style="background-image: url(http://www.compucell3d.net/images/logo_trans.png);" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a title="Visit the Main Page [control-z]" accesskey="z" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page">Main Page</a></li>
				<li title="About the project, what you can do, where to find things" id="n-portal"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Community_Portal">Community portal</a></li>
				<li title="Find background information on current events" id="n-currentevents"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Current_events">Current events</a></li>
				<li id="n-recentchanges"><a title="The list of recent changes in the wiki. [control-r]" accesskey="r" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Recentchanges">Recent changes</a></li>
				<li id="n-randompage"><a title="Load a random page [control-x]" accesskey="x" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Random">Random page</a></li>
				<li title="The place to find out." id="n-help"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Help:Contents">Help</a></li>
				<li title="Support us" id="n-sitesupport"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Site_support">Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/mediawiki1.7/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" accesskey="f" type="text">
				<input name="go" class="searchButton" id="searchGoButton" value="Go" type="submit">&nbsp;
				<input name="fulltext" class="searchButton" value="Search" type="submit">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a title="List of all wiki pages that link here [control-j]" accesskey="j" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Whatlinkshere&amp;target=Camera_icon_png_bug">What links here</a></li>
				<li id="t-recentchangeslinked"><a title="Recent changes in pages linked from this page [control-k]" accesskey="k" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Recentchangeslinked&amp;target=Camera_icon_png_bug">Related changes</a></li>
<li id="t-upload"><a title="Upload images or media files [control-u]" accesskey="u" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a title="List of all special pages [control-q]" accesskey="q" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Camera_icon_png_bug&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Camera_icon_png_bug&amp;oldid=27921">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="Camera%20icon%20png%20bug%20-%20CompuCell3D%20Wiki_files/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 13:41, 25 September 2012.</li>
				<li id="viewcount">This page has been accessed 70 times.</li>
				<li id="privacy"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Privacy_policy" title="CompuCell3D Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:About" title="CompuCell3D Wiki:About">About CompuCell3D Wiki</a></li>
				<li id="disclaimer"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:General_disclaimer" title="CompuCell3D Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by babbage in 0.367 secs. -->

</body></html>
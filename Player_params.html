<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="keywords" content="Player params,Heiland">
<link rel="shortcut icon" href="http://old.compucell3d.org/favicon.ico">
		<title>Player params - CompuCell3D Wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/mediawiki1.7/skins/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="Player_params_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki1.7/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '/mediawiki1.7/skins';</script>
		<script type="text/javascript" src="Player_params_files/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="Player_params_files/index.js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/mediawiki1.7/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Player params</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From CompuCell3D Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<pre>When starting a cc3D session via the player, the following is invoked:
---- Configuration __init__.py:   initPreferences() -- WILL READ SETTINGS

and similarly, when quitting the player, we get:
CALLING CLOSE EVENT FROM  SIMTAB
---- SimpleTabView.py:    closeEventSimpleTabView()

---- Configuration __init__.py:    syncPreferences(), WILL WRITE SETTINGS
---- Configuration __init__.py:   initPreferences() -- WILL READ SETTINGS
END OF SIMULATION

</pre>
<pre>-----------------  player/Configuration/__init__.py:

def setCellTypeColors(key, value, prefClass = Configs):    
    print "GO THIS KEY:",key, "GOT THIS VALUE",value
    if key in ["Border", "Contour", "Brush", "Pen"]:
        prefClass.settings.setValue("CellTypeColors/" + key, QVariant(value.name()))
    
    elif key in ["TypeColorMap"]:
        # value is dictionary
        penColorList = QStringList()
        for i in range(len(value)):
            keys = value.keys()
            penColorList.append(str(keys[i]))
            penColorList.append(str(value[keys[i]].name()))
            
        prefClass.settings.setValue("CellTypeColors/" + key, QVariant(penColorList))
    elif key in ["CustomTypeColorMap"]:
        colorMapStr = prefClass.settings.value("CellTypeColors/" + "TypeColorMap")
        colorDict={}
        
        if colorMapStr.isValid():
            colorList = colorMapStr.toStringList()            

            k = 0
            for i in range(colorList.count()/2):
                cellType, ok  = colorList[k].toInt()
                k       += 1
                color   = colorList[k]
                k       += 1
                if ok:
                    colorDict[cellType]  = QColor(color)    
        else:
            colorDict=prefClass.colorsDefaults["TypeColorMap"]
            
        # value is dictionary
        for newCellType in value.keys():
            colorDict[newCellType]=value[newCellType]
            
        penColorList = QStringList()
        for i in range(len(colorDict)):
            keys = colorDict.keys()
            penColorList.append(str(keys[i]))
            penColorList.append(str(colorDict[keys[i]].name()))
            # print "type=",keys[i]," color=",colorDict[keys[i]].name()
                
        prefClass.settings.setValue("CellTypeColors/" +"TypeColorMap", QVariant(penColorList))


...

def setThreeDView(key, value, prefClass = Configs):
    if key in ["Types3DInvisible"]:
        prefClass.settings.setValue("ThreeDView/" + key, QVariant(value))
...

def setOutputFrequency(key, value, prefClass = Configs):
    if key in ["NoOutputFlag", "UseInternalConsole","ScreenUpdateFrequency", "ScreenshotFrequency",  "ClosePlayerAfterSimulationDone","OutputLatticeDataInBinaryFormat"]:
        prefClass.settings.setValue("OutputFrequency/" + key, QVariant(value))
...

def setVisualization(key, value, prefClass = Configs):
    if key in ["CellsOn", "BordersOn", "CellGlyphsOn", "FPPLinksOn", "ConcentrationLimitsOn", "ZoomFactor"]:
        prefClass.settings.setValue("Visualization/" + key, QVariant(value))
...


</pre>
<pre>-----------------  player/Plugins/ViewManagerPlugins/SimpleTabView.py:

    def loadCustomPlayerSettings(self,_root_element):
        import XMLUtils
        import CC3DXML
        from XMLUtils import dictionaryToMapStrStr as d2mss        
        playerSettingsElement=_root_element.getFirstElement("Plugin",d2mss({"Name":"PlayerSettings"}))
        if playerSettingsElement:
            visualControlElement=playerSettingsElement.getFirstElement("VisualControl")
            if visualControlElement:
                if visualControlElement.findAttribute("ScreenshotFrequency"):
                    scrFreq=visualControlElement.getAttributeAsUInt("ScreenshotFrequency")
                    
                    Configuration.setOutputFrequency("ScreenshotFrequency",scrFreq)

...

	if visualControlElement.findAttribute("ClosePlayerAfterSimulationDone"):
	    closePlayerAfterSimulationDone=visualControlElement.getAttributeAsBool("ClosePlayerAfterSimulationDone")
	    Configuration.setOutputFrequency("ClosePlayerAfterSimulationDone",closePlayerAfterSimulationDone)
                self.__paramsChanged()    
                
            borderElement=playerSettingsElement.getFirstElement("Border")
            if borderElement:
                if borderElement.findAttribute("BorderColor"):
                    # print "borderElement"
                    borderColor=borderElement.getAttribute("BorderColor")
                    Configuration.setCellTypeColors("Border", QColor(borderColor))
                    


                if borderElement.findAttribute("BorderOn"):
                    borderOn=borderElement.getAttributeAsBool("BorderOn")
                    Configuration.setVisualization("BordersOn", borderOn)
...

    def __openPlayerParams(self):    
        filter = "Player parameters file (*.txt)" # self._getOpenFileFilter() 
        self.__playerParamsFileName = QFileDialog.getOpenFileName(\
            self.ui,
            QApplication.translate('ViewManager', "Open Player Parameters File"),
            os.getcwd(), 
            filter
            )
        
    def __savePlayerParams(self):
        # print "THIS IS __saveScrDesc"
        filter = "Player parameters File (*.txt )" # self._getOpenFileFilter() 
        self.playerParamsFileName = QFileDialog.getSaveFileName(\
            self.ui,
            QApplication.translate('ViewManager', "Save Player Parameters File"),
            os.getcwd(), 
            filter
            )
#        if self.screenshotManager:
#            self.screenshotManager.writePlayerParamsFile(self.playerParamsFileName)
            
        print "playerParamsFileName=",self.playerParamsFileName
        pFile = open(self.playerParamsFileName,'w')
        pFile.write('size 512\n')
        pFile.close()
...


    def __checkFPPLinks(self, checked):
        print 'SimpleTabView.py:  __checkFPPLinks, checked=',checked
        Configuration.setVisualization("FPPLinksOn",checked)
        # Should be disabled when the simulation is not loaded!
        self.simulation.drawMutex.lock()
        if self.FPPLinksAct.isEnabled():
            if checked:
                if self.mainGraphicsWindow is not None:
                    self.mainGraphicsWindow.showFPPLinks()
                self.FPPLinksAct.setChecked(True)
            else:
                if self.mainGraphicsWindow is not None:
                    self.mainGraphicsWindow.hideFPPLinks()
                self.FPPLinksAct.setChecked(False)
#        else:
#            print '======== SimpleTabView.py:  __checkFPPLinks, FPPLinksAct NOT Enabled!!'
        self.simulation.drawMutex.unlock()

...

    def __showConfigDialog(self, pageName = None):
        """
        Private slot to set the configurations.
        @param pageName name of the configuration page to show (string or QString)
        """
        dlg = ConfigurationDialog(self, 'Configuration', True)
        self.connect(dlg, SIGNAL('configsChanged'), self.__configsChanged)
        dlg.show()
        dlg.showConfigurationPageByName("default") #showConfigurationDefaultPage()#
        
        dlg.exec_()
        QApplication.processEvents()

        if dlg.result() == QDialog.Accepted:
            # Saves changes from all configuration pages!
            dlg.setPreferences()
            Configuration.syncPreferences()
            self.__configsChanged() # Explicitly calling signal 'configsChanged'
...

    def __setConnects(self):        
        self.connect(self.runAct,   SIGNAL('triggered()'), self.__runSim) 
        self.connect(self.stepAct,  SIGNAL('triggered()'), self.__stepSim)
        self.connect(self.pauseAct, SIGNAL('triggered()'), self.__pauseSim)
        self.connect(self.stopAct,  SIGNAL('triggered()'), self.__simulationStop)
        
        self.connect(self.openAct,  SIGNAL('triggered()'), self.__openSim)
        self.connect(self.saveAct,  SIGNAL('triggered()'), self.__saveSim)
        
        self.connect(self.saveScreenshotDescriptionAct,  SIGNAL('triggered()'), self.__saveScrDesc)
        self.connect(self.openScreenshotDescriptionAct,  SIGNAL('triggered()'), self.__openScrDesc)
        
        self.connect(self.savePlayerParamsAct,  SIGNAL('triggered()'), self.__savePlayerParams)
        self.connect(self.openPlayerParamsAct,  SIGNAL('triggered()'), self.__openPlayerParams)
        
        self.connect(self.openLDSAct,  SIGNAL('triggered()'), self.__openLDSFile)
        
        self.connect(self.cellsAct,    SIGNAL('triggered(bool)'),  self.__checkCells)
        self.connect(self.borderAct,    SIGNAL('triggered(bool)'),  self.__checkBorder)
        self.connect(self.cellGlyphsAct,  SIGNAL('triggered(bool)'),  self.__checkCellGlyphs)
        self.connect(self.FPPLinksAct,  SIGNAL('triggered(bool)'),  self.__checkFPPLinks)

        # self.connect(self.contourAct,   SIGNAL('triggered(bool)'),  self.__checkContour)
        self.connect(self.limitsAct,    SIGNAL('triggered(bool)'),  self.__checkLimits)
        self.connect(self.configAct,    SIGNAL('triggered()'),      self.__showConfigDialog)
       ...


</pre>
<pre>-----------------  player/ViewManager/SimpleViewManager.py:

    def initToolsMenu(self):
        menu = QMenu(QApplication.translate('ViewManager', '&amp;Tools'), self.ui)
        # Don't remove. Will be implemented later
        #menu.addAction(self.pifGenAct)
        #menu.addAction(self.pifVisAct)     
        # # # menu.addAction(self.movieAct)
        menu.addSeparator()
        menu.addAction(self.configAct)
        # menu.addAction(self.pifFromVTKAct)
        # self.pifFromVTKAct.setEnabled(False)

        menu.addAction(self.pifFromSimulationAct)
        self.pifFromSimulationAct.setEnabled(False)
        
        return menu

    def __initFileActions(self):
...
        self.openScreenshotDescriptionAct=QAction(QIcon("player/icons/screenshots_open.png"), "&amp;Open Screenshot Description...", self)
        
        self.savePlayerParamsAct=QAction(QIcon("player/icons/screenshots_save_alt.png"), "&amp;Save Player Parameters...", self)
...

</pre>
<pre>heiland@Macintosh-7:~/Documents/workspace2/cc3d-3.4.2-oct2010/player$ grep setoutputfreq */*.py
Configuration/__init__.py:def setOutputFrequency(key, value, prefClass = Configs):


heiland@Macintosh-7:~/Documents/workspace2/cc3d-3.4.2-oct2010/player$ grep setoutputfreq */*/*.py
Configuration/ConfigurationPages/FrequencyPage.py:            Configuration.setOutputFrequency(key, self.output[key])
Plugins/ViewManagerPlugins/SimpleTabView.py:                    Configuration.setOutputFrequency("ScreenshotFrequency",scrFreq)
Plugins/ViewManagerPlugins/SimpleTabView.py:                    Configuration.setOutputFrequency("ScreenUpdateFrequency",screenUpdateFrequency)
Plugins/ViewManagerPlugins/SimpleTabView.py:                    Configuration.setOutputFrequency("NoOutputFlag",noOutput)
Plugins/ViewManagerPlugins/SimpleTabView.py:		    Configuration.setOutputFrequency("ClosePlayerAfterSimulationDone",closePlayerAfterSimulationDone)


heiland@Macintosh-7:~/Documents/workspace2/cc3d-3.4.2-oct2010/player$ ^set^get
grep getoutputfreq */*/*.py
Configuration/ConfigurationPages/FrequencyPage.py:        self.output["NoOutputFlag"]             = Configuration.getOutputFrequency("NoOutputFlag")
Configuration/ConfigurationPages/FrequencyPage.py:        self.output["ScreenUpdateFrequency"]    = Configuration.getOutputFrequency("ScreenUpdateFrequency")
Configuration/ConfigurationPages/FrequencyPage.py:        self.output["ScreenshotFrequency"]      = Configuration.getOutputFrequency("ScreenshotFrequency")
Configuration/ConfigurationPages/FrequencyPage.py:        self.output["UseInternalConsole"]      = Configuration.getOutputFrequency("UseInternalConsole")
Configuration/ConfigurationPages/FrequencyPage.py:        self.output["ClosePlayerAfterSimulationDone"]      = Configuration.getOutputFrequency("ClosePlayerAfterSimulationDone")
Configuration/ConfigurationPages/FrequencyPage.py:        self.output["OutputLatticeDataInBinaryFormat"]      = Configuration.getOutputFrequency("OutputLatticeDataInBinaryFormat")
Plugins/ViewManagerPlugins/SimpleTabView.py:        # print "THIS IS Configuration.getOutputFrequency(OutputLatticeDataInBinaryFormat)",Configuration.getOutputFrequency("OutputLatticeDataInBinaryFormat")
Plugins/ViewManagerPlugins/SimpleTabView.py:        if Configuration.getOutputFrequency("OutputLatticeDataInBinaryFormat"):
Plugins/ViewManagerPlugins/SimpleTabView.py:        if  Configuration.getOutputFrequency("OutputLatticeDataInBinaryFormat") and not self.cmlHandlerCreated:
Plugins/ViewManagerPlugins/SimpleTabView.py:        if  Configuration.getOutputFrequency("OutputLatticeDataInBinaryFormat") and not self.cmlHandlerCreated:
Plugins/ViewManagerPlugins/SimpleTabView.py:        if Configuration.getOutputFrequency("ClosePlayerAfterSimulationDone") or self.closePlayerAfterSimulationDone:
Plugins/ViewManagerPlugins/SimpleTabView.py:        self.__updateScreen     = Configuration.getOutputFrequency("ScreenUpdateFrequency")
Plugins/ViewManagerPlugins/SimpleTabView.py:        self.__noOutput         = Configuration.getOutputFrequency("NoOutputFlag")
Plugins/ViewManagerPlugins/SimpleTabView.py:        self.__shotFrequency    = Configuration.getOutputFrequency("ScreenshotFrequency")
</pre>
<pre>heiland@Macintosh-7:~/Documents/workspace2/cc3d-3.4.2-oct2010/player$ grep mc */*.py|grep step
Simulation/CMLResultReader.py:    def setCurrentStepDirectAccess(self, _mcs):
Simulation/SimulationThread.py:    def emitCompletedStep(self,_mcs=None):
Simulation/SimulationThread.py:        self.emit(SIGNAL("completedStep(int)") , _mcs)
Simulation/SimulationThread.py:    def setCurrentStep(self,_mcs):
Simulation/SimulationThread.py:        self.emitCompletedStep(_mcs)
Simulation/SimulationThread.py:    def beforeStep(self,_mcs):

Plugins/ViewManagerPlugins/SimpleTabView.py:        self.mcSteps.setText("MC Step: %s"% step)

</pre>
<li>Back to <a href="http://old.compucell3d.org/mediawiki1.7/index.php/Heiland" title="Heiland">Heiland</a>

<!-- Saved in parser cache with key wikidb:pcache:idhash:228-0!1!0!0!!en!2 and timestamp 20120521181323 -->
<div class="printfooter">
Retrieved from "<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Player_params">http://old.compucell3d.org/mediawiki1.7/index.php/Player_params</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</li></div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a title="View the content page [control-c]" accesskey="c" href="http://old.compucell3d.org/mediawiki1.7/index.php/Player_params">Article</a></li>
				 <li id="ca-talk" class="new"><a title="Discussion about the content page [control-t]" accesskey="t" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Talk:Player_params&amp;action=edit">Discussion</a></li>
				 <li id="ca-edit"><a title="You can edit this page. Please use the preview button before saving. [control-e]" accesskey="e" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Player_params&amp;action=edit">Edit</a></li>
				 <li id="ca-history"><a title="Past versions of this page. [control-h]" accesskey="h" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Player_params&amp;action=history">History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a title="You are encouraged to log in, it is not mandatory however. [control-o]" accesskey="o" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Userlogin&amp;returnto=Player_params">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div title="Main Page" class="portlet" id="p-logo">
		<a style="background-image: url(&quot;http://www.compucell3d.net/images/logo_trans.png&quot;);" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a title="Visit the Main Page [control-z]" accesskey="z" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page">Main Page</a></li>
				<li title="About the project, what you can do, where to find things" id="n-portal"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Community_Portal">Community portal</a></li>
				<li title="Find background information on current events" id="n-currentevents"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Current_events">Current events</a></li>
				<li id="n-recentchanges"><a title="The list of recent changes in the wiki. [control-r]" accesskey="r" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Recentchanges">Recent changes</a></li>
				<li id="n-randompage"><a title="Load a random page [control-x]" accesskey="x" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Random">Random page</a></li>
				<li title="The place to find out." id="n-help"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Help:Contents">Help</a></li>
				<li title="Support us" id="n-sitesupport"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Site_support">Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/mediawiki1.7/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" accesskey="f" type="text">
				<input name="go" class="searchButton" id="searchGoButton" value="Go" type="submit">&nbsp;
				<input name="fulltext" class="searchButton" value="Search" type="submit">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a title="List of all wiki pages that link here [control-j]" accesskey="j" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Whatlinkshere&amp;target=Player_params">What links here</a></li>
				<li id="t-recentchangeslinked"><a title="Recent changes in pages linked from this page [control-k]" accesskey="k" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Recentchangeslinked&amp;target=Player_params">Related changes</a></li>
<li id="t-upload"><a title="Upload images or media files [control-u]" accesskey="u" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a title="List of all special pages [control-q]" accesskey="q" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Player_params&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Player_params&amp;oldid=27241">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="Player_params_files/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 13:52, 13 May 2011.</li>
				<li id="viewcount">This page has been accessed 258 times.</li>
				<li id="privacy"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Privacy_policy" title="CompuCell3D Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:About" title="CompuCell3D Wiki:About">About CompuCell3D Wiki</a></li>
				<li id="disclaimer"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:General_disclaimer" title="CompuCell3D Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by babbage in 0.314 secs. -->

</body></html>
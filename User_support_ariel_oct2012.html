<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="keywords" content="User support ariel oct2012,Heiland">
<link rel="shortcut icon" href="http://old.compucell3d.org/favicon.ico">
		<title>User support ariel oct2012 - CompuCell3D Wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/mediawiki1.7/skins/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki1.7/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '/mediawiki1.7/skins';</script>
		<script type="text/javascript" src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/index.js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/mediawiki1.7/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">User support ariel oct2012</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From CompuCell3D Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Mcs6928_3Dcells_hide_ct1.png" class="image" title="Image:mcs6928_3Dcells_hide_ct1.png"><img src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/Mcs6928_3Dcells_hide_ct1.png" alt="Image:mcs6928_3Dcells_hide_ct1.png" longdesc="/mediawiki1.7/index.php/Image:Mcs6928_3Dcells_hide_ct1.png" height="762" width="1185"></a>
</p><p>Hiding celltype 1 (Frozen) in 3D view.
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Mcs6928_3Dcells_2Dslices.png" class="image" title="Image:mcs6928_3Dcells_2Dslices.png"><img src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/Mcs6928_3Dcells_2Dslices.png" alt="Image:mcs6928_3Dcells_2Dslices.png" longdesc="/mediawiki1.7/index.php/Image:Mcs6928_3Dcells_2Dslices.png" height="879" width="972"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Mcs267_3Dcells_top.png" class="image" title="Image:mcs267_3Dcells_top.png"><img src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/Mcs267_3Dcells_top.png" alt="Image:mcs267_3Dcells_top.png" longdesc="/mediawiki1.7/index.php/Image:Mcs267_3Dcells_top.png" height="575" width="612"></a>
</p><p>From the top (or bottom? - whatever grows first).
</p>
<hr>
<pre>...
Step 7012 Flips 133637/9187500 Energy -34947.7 Cells 229 Inventory=229
cell numbers 163.56851312       0       1       20      72      81      55      0

cell max heights [0, 2.0, 9.295580110497237, 9.8, 31.92288961038961, 30.586993243243242, 0]
percent TA cells 21.7391304348
FAST numberOfAttempts=9187500
Have checked 84 cells
set of NeighborSurfaceData do not match for cell: 0x7fb4b7b16460
cell-&gt;id=84 cell-&gt;type=4

--&gt;
~/git/CompuCell3D/CompuCell3D/core$ grep "do not match" */*/*/*.cpp
...
CompuCell3D/plugins/NeighborTracker/NeighborTrackerPlugin.cpp:                                  cerr&lt;&lt;"set of NeighborSurfaceData do not match for cell: "&lt;&lt;cell&lt;&lt;endl;


What about running with a single thread:
SkinMattekNutrientShrink.py:#    metadata.ElementCC3D("VirtualProcessingUnits",{"ThreadsPerVPU":2},4)
SkinMattekNutrientShrink.py:    metadata.ElementCC3D("VirtualProcessingUnits",{"ThreadsPerVPU":1},1)
</pre>
<pre>OK, I've spent too much time on your "bug" of not being to use runScript.  The basic problem stems from the voodoo you're trying 
to do in this function in MattekMasterSteppableNutrientShrink.py:

def writeFileToScreenshotOutputDirectory(CompuCellSetup, files_to_write=[]):

    screenshotDirectoryName = CompuCellSetup.getScreenshotDirectoryName()
    if screenshotDirectoryName is not "":
        print("screenshotDirectoryName", screenshotDirectoryName)

        screenshot_directory_parts = screenshotDirectoryName.split("/")
        parent = "/".join(screenshot_directory_parts[:-1])

        caller_file_name = inspect.stack()[1][1]
        caller_file_name = os.path.abspath(caller_file_name)
        print("caller file name", caller_file_name)

        shutil.copy2(caller_file_name, screenshotDirectoryName)
        shutil.copy2(CompuCellSetup.simulationPythonScriptName, screenshotDirectoryName)

        for file_name in files_to_write:
            shutil.copy2(parent + "/" + file_name, screenshotDirectoryName)

--------------------------

What's happening is that this copies/creates a *file*, not a *directory* called, e.g.:

~/CC3DWorkspace$ ll|grep skin
-rw-r--r--     1 heiland  staff   18041 Oct  3 10:48 SkinMattekNutrientShrink_py_10_03_2012_11_14_35


and then, later, in cc3d, when we try to create the /LatticeData subdir at this dir, it realizes that it's not a 
dir after all, but a file and croaks with an error:
"â€¦./pythonSetupScripts/CMLFieldHandler.py", line 132, in prepareSimulationStorageDir
    makedirs(_dirName)


----------------------
Here's a tweaked function of the one above to at least show you that a file is being created instead of a dir and 
I'll leave it to you to figure out a proper fix:

def writeFileToScreenshotOutputDirectory(CompuCellSetup, files_to_write=[]):

    screenshotDirectoryName = CompuCellSetup.getScreenshotDirectoryName()
    if screenshotDirectoryName is not "":
        print("screenshotDirectoryName", screenshotDirectoryName)

        screenshot_directory_parts = screenshotDirectoryName.split("/")
        parent = "/".join(screenshot_directory_parts[:-1])

        caller_file_name = inspect.stack()[1][1]
        caller_file_name = os.path.abspath(caller_file_name)
        print("caller file name", caller_file_name)

        print ("MattekMasterSteppableNutrientShrink.py: writeFileToScreenshotOutputDirectory():  caller_file name=", caller_file_name)
        print ("MattekMasterSteppableNutrientShrink.py: writeFileToScreenshotOutputDirectory():  screenshotDirectoryName=",screenshotDirectoryName )
        if not os.path.isdir(screenshotDirectoryName):
           print ("MattekMasterSteppableNutrientShrink.py: writeFileToScreenshotOutputDirectory():  screenshotDirectoryName is NOT a dir!!!!!!!!!!!!")
#           os.makedirs(dest_path)   # might try to use this to make it a dir
        shutil.copy2(caller_file_name, screenshotDirectoryName)
        shutil.copy2(CompuCellSetup.simulationPythonScriptName, screenshotDirectoryName)

        for file_name in files_to_write:
            file2copy = parent + "/" + file_name
            print ("MattekMasterSteppableNutrientShrink.py: writeFileToScreenshotOutputDirectory():  file2copy=",file2copy)           
            shutil.copy2(file2copy, screenshotDirectoryName)


-Randy


On Oct 2, 2012, at 6:35 PM, Ariel Balter wrote:

Ok.  Thanks.


On 10/02/2012 03:34 PM, Randy Heiland wrote:
No, when I tried a couple of options, it didn't work for me either.  Will try to tackle it again tomorrow probably.

On Oct 2, 2012, at 6:33 PM, Ariel Balter wrote:

Ok.  But if I want to run on a cluster, I still need to use the no gui option.  I just tried putting my simulation files 
directly in the install directory.  Still no luck.  

Does it work for you?


On 10/02/2012 03:31 PM, Randy Heiland wrote:
No.  Bad assumption.  Just set your screen image update very high.

On Oct 2, 2012, at 6:26 PM, Ariel Balter wrote:

Any progress on the run script (no gui) thing?  I'm assuming that it would be much faster without the gui.

Thanks, Ari

On 10/02/2012 12:25 PM, Randy Heiland wrote:
My run just stopped around mcs 6000 with the following "do not match" msg - mean anything to anyone?

...
cell max heights [0, 2.0, 9.35483870967742, 9.926395939086294, 33.25136186770428, 29.833333333333332, 0]
percent TA cells 25.5319148936
FAST numberOfAttempts=9187500
Number of Attempted Energy Calculations=475091
Step 5940 Flips 133182/9187500 Energy -32505.9 Cells 226 Inventory=226
cell numbers 138.565597668 0 1 24 70 98 33 0

cell max heights [0, 2.0, 9.507894736842106, 10.090225563909774, 33.30733229329173, 29.69217391304348, 0]
percent TA cells 25.5319148936
FAST numberOfAttempts=9187500
Have checked 90 cells
set of NeighborSurfaceData do not match for cell: 0x7ff43798f020
cell-&gt;id=90 cell-&gt;type=5



On Oct 2, 2012, at 1:07 PM, Ariel Balter wrote:

Incidentally, does suppressing VTK output speed things up?


On 10/02/2012 10:04 AM, Randy Heiland wrote:
Ah, if I change to a different 2D slice (e.g. xy 6), I'll see some cells.

On Oct 2, 2012, at 12:45 PM, Randy Heiland wrote:

Should I see anything drawn in the Cell_Field?  I'm not (see attached image).  I've also displayed the Activity Monitor, 
showing that it's using basically all 8 threads (this is on my Mac, but I've also got it running on Ubuntu).

&lt;mcs881.png&gt;


On Oct 2, 2012, at 12:01 PM, Ariel Balter wrote:

Those are diagnostics (raw_input())
Hit enter.  You will need to do it 4 times.


On 10/2/2012 8:24 AM, Randy Heiland wrote:
How should this be run and what should I see as output?  When I open/run:  SkinMattekNutrientShrink.py
I get as output:
...
    99 TA 63 69 56 62 5 11 

    100 TA 63 69 63 69 5 11 

('cumulative z', 12)
('x_dim', 70, 'y_dim', 70, 'z_dim', 125)
70 70 125
('number of mcs', 17493.0)

But nothing seems to appear in the player.  Single stepping more than once or twice seems to have it hang forever - or is 
this an incredibly lengthy computation?


On Oct 2, 2012, at 11:06 AM, Ariel Balter wrote:

I think it is very likely to have something to do with my machine and/or install.  But here are the files.  It generally 
crashes 1-2 hours in.


On 10/02/2012 07:15 AM, Randy Heiland wrote:
What input file?  I'll try to reproduce it.

-Randy

On Oct 1, 2012, at 4:46 PM, Ariel Balter wrote:

Hi folks.  I'm running cc3d on two different machines.  On the machine I've been using it runs fine.  On the new machine 
it is crashing after a while.  Here is the error.  Does this mean anything to you?  It was installed on a 64 bit machine using 
the .deb.

I'm using periodic BC.  Would that matter?

Thanks, Ariel

FAST numberOfAttempts=10412500
Have checked 49 cells
set of NeighborSurfaceData do not match for cell: 0x7facac39b7b0
cell-&gt;id=49 cell-&gt;type=5


&lt;SkinMattekNutrientShrink.py&gt;&lt;MattekMasterSteppableNutrientShrink.py&gt;&lt;makeMattekSkinTwoLayers3DPercent.py&gt;

</pre>
<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Mcs13854_3Dcells.png" class="image" title="Image:mcs13854_3Dcells.png"><img src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/Mcs13854_3Dcells.png" alt="Image:mcs13854_3Dcells.png" longdesc="/mediawiki1.7/index.php/Image:Mcs13854_3Dcells.png" height="577" width="612"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Profiling_mcs14k.png" class="image" title="Image:profiling_mcs14k.png"><img src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/Profiling_mcs14k.png" alt="Image:profiling_mcs14k.png" longdesc="/mediawiki1.7/index.php/Image:Profiling_mcs14k.png" height="713" width="1265"></a>
</p>
<hr>
<li>Back to <a href="http://old.compucell3d.org/mediawiki1.7/index.php/Heiland" title="Heiland">Heiland</a>

<!-- Saved in parser cache with key wikidb:pcache:idhash:510-0!1!0!0!!en!2 and timestamp 20130212211444 -->
<div class="printfooter">
Retrieved from "<a href="http://old.compucell3d.org/mediawiki1.7/index.php/User_support_ariel_oct2012">http://old.compucell3d.org/mediawiki1.7/index.php/User_support_ariel_oct2012</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</li></div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a title="View the content page [control-c]" accesskey="c" href="http://old.compucell3d.org/mediawiki1.7/index.php/User_support_ariel_oct2012">Article</a></li>
				 <li id="ca-talk" class="new"><a title="Discussion about the content page [control-t]" accesskey="t" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Talk:User_support_ariel_oct2012&amp;action=edit">Discussion</a></li>
				 <li id="ca-edit"><a title="You can edit this page. Please use the preview button before saving. [control-e]" accesskey="e" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=User_support_ariel_oct2012&amp;action=edit">Edit</a></li>
				 <li id="ca-history"><a title="Past versions of this page. [control-h]" accesskey="h" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=User_support_ariel_oct2012&amp;action=history">History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a title="You are encouraged to log in, it is not mandatory however. [control-o]" accesskey="o" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Userlogin&amp;returnto=User_support_ariel_oct2012">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div title="Main Page" class="portlet" id="p-logo">
		<a style="background-image: url(http://www.compucell3d.net/images/logo_trans.png);" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a title="Visit the Main Page [control-z]" accesskey="z" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page">Main Page</a></li>
				<li title="About the project, what you can do, where to find things" id="n-portal"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Community_Portal">Community portal</a></li>
				<li title="Find background information on current events" id="n-currentevents"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Current_events">Current events</a></li>
				<li id="n-recentchanges"><a title="The list of recent changes in the wiki. [control-r]" accesskey="r" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Recentchanges">Recent changes</a></li>
				<li id="n-randompage"><a title="Load a random page [control-x]" accesskey="x" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Random">Random page</a></li>
				<li title="The place to find out." id="n-help"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Help:Contents">Help</a></li>
				<li title="Support us" id="n-sitesupport"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Site_support">Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/mediawiki1.7/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" accesskey="f" type="text">
				<input name="go" class="searchButton" id="searchGoButton" value="Go" type="submit">&nbsp;
				<input name="fulltext" class="searchButton" value="Search" type="submit">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a title="List of all wiki pages that link here [control-j]" accesskey="j" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Whatlinkshere&amp;target=User_support_ariel_oct2012">What links here</a></li>
				<li id="t-recentchangeslinked"><a title="Recent changes in pages linked from this page [control-k]" accesskey="k" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Recentchangeslinked&amp;target=User_support_ariel_oct2012">Related changes</a></li>
<li id="t-upload"><a title="Upload images or media files [control-u]" accesskey="u" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a title="List of all special pages [control-q]" accesskey="q" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=User_support_ariel_oct2012&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=User_support_ariel_oct2012&amp;oldid=27971">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="User%20support%20ariel%20oct2012%20-%20CompuCell3D%20Wiki_files/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 23:37, 6 October 2012.</li>
				<li id="viewcount">This page has been accessed 64 times.</li>
				<li id="privacy"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Privacy_policy" title="CompuCell3D Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:About" title="CompuCell3D Wiki:About">About CompuCell3D Wiki</a></li>
				<li id="disclaimer"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:General_disclaimer" title="CompuCell3D Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by babbage in 0.295 secs. -->

</body></html>
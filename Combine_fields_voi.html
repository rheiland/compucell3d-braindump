<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="keywords" content="Combine fields voi,Heiland">
<link rel="shortcut icon" href="http://old.compucell3d.org/favicon.ico">
		<title>Combine fields voi - CompuCell3D Wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/mediawiki1.7/skins/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki1.7/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '/mediawiki1.7/skins';</script>
		<script type="text/javascript" src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/index.js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/mediawiki1.7/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Combine fields voi</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From CompuCell3D Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>Julio asked about doing something like this:
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:3DviewCut.png" class="image" title="Image:3DviewCut.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/3DviewCut.png" alt="Image:3DviewCut.png" longdesc="/mediawiki1.7/index.php/Image:3DviewCut.png" height="222" width="290"></a>
</p><p>in the context of post-processing .vtk files from cc3D.  The 
sample .vtk file that he provided resulted in a contour of the Shape 
field that looked like this (in ParaView and in CC3D).
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Shape_iso_2_pv.png" class="image" title="Image:shape_iso_2_pv.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/Shape_iso_2_pv.png" alt="Image:shape_iso_2_pv.png" longdesc="/mediawiki1.7/index.php/Image:Shape_iso_2_pv.png" height="660" width="893"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Shape_iso_2_cc3d.png" class="image" title="Image:shape_iso_2_cc3d.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/Shape_iso_2_cc3d.png" alt="Image:shape_iso_2_cc3d.png" longdesc="/mediawiki1.7/index.php/Image:Shape_iso_2_cc3d.png" height="575" width="711"></a>
</p>
<hr>
<p>Then we show a 2D slice and an experimental 3D VOI of the cell field:
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Limbbud_xy_150.png" class="image" title="Image:limbbud_xy_150.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/Limbbud_xy_150.png" alt="Image:limbbud_xy_150.png" longdesc="/mediawiki1.7/index.php/Image:Limbbud_xy_150.png" height="461" width="853"></a>
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Limbbud_voi1b.png" class="image" title="Image:limbbud_voi1b.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/Limbbud_voi1b.png" alt="Image:limbbud_voi1b.png" longdesc="/mediawiki1.7/index.php/Image:Limbbud_voi1b.png" height="577" width="614"></a>
</p><p>It seems that one issue for combining both 3D (e.g. contour) and 
2D (e.g. cell field slice) in the same window is that currently we use 
vtkImageViewer2 for rendering 2D images (in MVCDrawModel2D.py, 
initCellFieldActorsData) and vtkRenderer for 3D.
</p>
<hr>
<hr> from the VTK class docs:
<p>vtkImageViewer2 is a convenience class for displaying a 2D image. It 
packages up the functionality found in vtkRenderWindow, vtkRenderer, 
vtkImageActor and vtkImageMapToWindowLevelColors into a single easy to 
use class. This class also creates an image interactor style 
(vtkInteractorStyleImage) that allows zooming and panning of images, and
 supports interactive window/level operations on the image. Note that 
vtkImageViewer2 is simply a wrapper around these classes.
</p><p>vtkImageViewer2 uses the 3D rendering and texture mapping engine 
to draw an image on a plane. This allows for rapid rendering, zooming, 
and panning. The image is placed in the 3D scene at a depth based on the
 z-coordinate of the particular image slice. Each call to SetSlice() 
changes the image data (slice) displayed AND changes the depth of the 
displayed slice in the 3D scene. This can be controlled by the 
AutoAdjustCameraClippingRange ivar of the InteractorStyle member.
</p><p>It is possible to mix images and geometry, using the methods:
</p><p>viewer-&gt;SetInputConnection( imageSource-&gt;GetOutputPort() );
 or viewer-&gt;SetInputData ( image ); 
viewer-&gt;GetRenderer()-&gt;AddActor( myActor );
</p><p>This can be used to annotate an image with a PolyData of "edges" 
or or highlight sections of an image or display a 3D isosurface with a 
slice from the volume, etc. Any portions of your geometry that are in 
front of the displayed slice will be visible; any portions of your 
geometry that are behind the displayed slice will be obscured. A more 
general framework (with respect to viewing direction) for achieving this
 effect is provided by the vtkImagePlaneWidget .
</p><p>Note that pressing 'r' will reset the window/level and pressing shift+'r' or control+'r' will reset the camera.
</p>
<hr>
<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Limbbud_rencells_ct1_6.png" class="image" title="Image:limbbud_rencells_ct1_6.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/Limbbud_rencells_ct1_6.png" alt="Image:limbbud_rencells_ct1_6.png" longdesc="/mediawiki1.7/index.php/Image:Limbbud_rencells_ct1_6.png" height="534" width="512"></a>
</p><p>Using a Python-VTK script (similar to what we used for Gilberto's
 bubbles and later for Vidhya's cells) to render cells that intersect a 
z-slice (=170).
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso1.png" class="image" title="Image:renCells_Iso1.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso1.png" alt="Image:renCells_Iso1.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso1.png" height="534" width="512"></a>
<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso2.png" class="image" title="Image:renCells_Iso2.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso2.png" alt="Image:renCells_Iso2.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso2.png" height="534" width="512"></a>
</p><p>Combining the same "3D cells intersecting a slice" together with a contour of the "shape" field (on just a VOI).
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso2_cut_bug.png" class="image" title="Image:renCells_Iso2_cut_bug.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso2_cut_bug.png" alt="Image:renCells_Iso2_cut_bug.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso2_cut_bug.png" height="534" width="512"></a>
</p><p>If we try to use vtkClipClosedSurface with a plane intersecting 
the above 3D cells, we get a mess (even after using a vtkCleanPolyData).
  Rf. ~/Documents/Glazier/Julio/Sep12-2012/renCellsCutSlice.py
</p>
<hr>
<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso2_clip_glyphs.png" class="image" title="Image:renCells_Iso2_clip_glyphs.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso2_clip_glyphs.png" alt="Image:renCells_Iso2_clip_glyphs.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso2_clip_glyphs.png" height="534" width="512"></a>
</p><p>Using spherical glyphs (fixed size; not scaled by cell volume) to
 represent cells that intersect with a clipping plane and then 
clipping/closing the glyphs. (.../Julio/Sep12-2012$ python 
renCells_Iso_Glyphs.py Step_04500 cells.dat 50 4).  Note that a cc3D 
.vtk file was used as input and, since we don't save the cells' centers 
of mass, had to approximate the center of mass of EACH cell (cellId), 
using the vtkDiscreteMarchingCubes filter that intersected the clipping 
plane and then doing a GetBounds() on the resulting polydata.
</p>
<hr>
<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso_Thresh.png" class="image" title="Image:renCells_Iso_Thresh.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso_Thresh.png" alt="Image:renCells_Iso_Thresh.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso_Thresh.png" height="534" width="512"></a>
</p><p>Using a vtkThreshold to remove celltype 0 (Medium).
</p>
<hr>
<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Custom1_julio_limb.png" class="image" title="Image:custom1_julio_limb.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/Custom1_julio_limb.png" alt="Image:custom1_julio_limb.png" longdesc="/mediawiki1.7/index.php/Image:Custom1_julio_limb.png" height="536" width="771"></a>
</p><p>Rendering in CC3D w/ .dml (slice=171)
</p><p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso_Thresh_Borders_front.png" class="image" title="Image:renCells_Iso_Thresh_Borders_front.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso_Thresh_Borders_front.png" alt="Image:renCells_Iso_Thresh_Borders_front.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso_Thresh_Borders_front.png" height="534" width="512"></a><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:RenCells_Iso_Thresh_Borders_angled.png" class="image" title="Image:renCells_Iso_Thresh_Borders_angled.png"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/RenCells_Iso_Thresh_Borders_angled.png" alt="Image:renCells_Iso_Thresh_Borders_angled.png" longdesc="/mediawiki1.7/index.php/Image:RenCells_Iso_Thresh_Borders_angled.png" height="534" width="512"></a>
</p><p>Not perfect match-up of 2D borders, but maybe close enough.  (slice=170)
</p>
<pre>~/Documents/Glazier/Julio/Sep12-2012$ python renCellsIsoThreshBorders.py Step_04500 cells.dat 5 170
...

~/Documents/Glazier/Julio/Sep12-2012$ ty cells.dat 
1   0 1 0
6   0 0 1
</pre>
<hr>
<li>Back to <a href="http://old.compucell3d.org/mediawiki1.7/index.php/Heiland" title="Heiland">Heiland</a>

<!-- Saved in parser cache with key wikidb:pcache:idhash:498-0!1!0!0!!en!2 and timestamp 20130212211420 -->
<div class="printfooter">
Retrieved from "<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Combine_fields_voi">http://old.compucell3d.org/mediawiki1.7/index.php/Combine_fields_voi</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</li></div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a title="View the content page [control-c]" accesskey="c" href="http://old.compucell3d.org/mediawiki1.7/index.php/Combine_fields_voi">Article</a></li>
				 <li id="ca-talk" class="new"><a title="Discussion about the content page [control-t]" accesskey="t" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Talk:Combine_fields_voi&amp;action=edit">Discussion</a></li>
				 <li id="ca-edit"><a title="You can edit this page. Please use the preview button before saving. [control-e]" accesskey="e" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Combine_fields_voi&amp;action=edit">Edit</a></li>
				 <li id="ca-history"><a title="Past versions of this page. [control-h]" accesskey="h" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Combine_fields_voi&amp;action=history">History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a title="You are encouraged to log in, it is not mandatory however. [control-o]" accesskey="o" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Userlogin&amp;returnto=Combine_fields_voi">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div title="Main Page" class="portlet" id="p-logo">
		<a style="background-image: url(http://www.compucell3d.net/images/logo_trans.png);" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a title="Visit the Main Page [control-z]" accesskey="z" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page">Main Page</a></li>
				<li title="About the project, what you can do, where to find things" id="n-portal"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Community_Portal">Community portal</a></li>
				<li title="Find background information on current events" id="n-currentevents"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Current_events">Current events</a></li>
				<li id="n-recentchanges"><a title="The list of recent changes in the wiki. [control-r]" accesskey="r" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Recentchanges">Recent changes</a></li>
				<li id="n-randompage"><a title="Load a random page [control-x]" accesskey="x" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Random">Random page</a></li>
				<li title="The place to find out." id="n-help"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Help:Contents">Help</a></li>
				<li title="Support us" id="n-sitesupport"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Site_support">Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/mediawiki1.7/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" accesskey="f" type="text">
				<input name="go" class="searchButton" id="searchGoButton" value="Go" type="submit">&nbsp;
				<input name="fulltext" class="searchButton" value="Search" type="submit">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a title="List of all wiki pages that link here [control-j]" accesskey="j" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Whatlinkshere&amp;target=Combine_fields_voi">What links here</a></li>
				<li id="t-recentchangeslinked"><a title="Recent changes in pages linked from this page [control-k]" accesskey="k" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Recentchangeslinked&amp;target=Combine_fields_voi">Related changes</a></li>
<li id="t-upload"><a title="Upload images or media files [control-u]" accesskey="u" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a title="List of all special pages [control-q]" accesskey="q" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Combine_fields_voi&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Combine_fields_voi&amp;oldid=28010">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="Combine%20fields%20voi%20-%20CompuCell3D%20Wiki_files/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 17:30, 25 October 2012.</li>
				<li id="viewcount">This page has been accessed 115 times.</li>
				<li id="privacy"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Privacy_policy" title="CompuCell3D Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:About" title="CompuCell3D Wiki:About">About CompuCell3D Wiki</a></li>
				<li id="disclaimer"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:General_disclaimer" title="CompuCell3D Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by babbage in 0.583 secs. -->

</body></html>
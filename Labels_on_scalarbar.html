<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="keywords" content="Labels on scalarbar,Heiland">
<link rel="shortcut icon" href="http://old.compucell3d.org/favicon.ico">
		<title>Labels on scalarbar - CompuCell3D Wiki</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/mediawiki1.7/skins/monobook/main.css?9"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="Labels_on_scalarbar_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE50Fixes.css";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE55Fixes.css";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE60Fixes.css";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki1.7/skins/monobook/IE70Fixes.css?1";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki1.7/skins/common/IEFixes.js"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script type="text/javascript">var skin = 'monobook';var stylepath = '/mediawiki1.7/skins';</script>
		<script type="text/javascript" src="Labels_on_scalarbar_files/wikibits.js"><!-- wikibits js --></script>
		<script type="text/javascript" src="Labels_on_scalarbar_files/index.js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/mediawiki1.7/index.php?title=MediaWiki:Common.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=MediaWiki:Monobook.css&action=raw&ctype=text/css&smaxage=18000";
@import "/mediawiki1.7/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body class="ns-0 ltr">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Labels on scalarbar</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From CompuCell3D Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:Sbar-labels.png" class="image" title="Image:sbar-labels.png"><img src="Labels_on_scalarbar_files/Sbar-labels.png" alt="Image:sbar-labels.png" longdesc="/mediawiki1.7/index.php/Image:Sbar-labels.png" height="400" width="400"></a>
</p>
<pre>from vtk import *
from random import random

import os,string,sys,math
try:
  VTK_DATA = os.environ['VTK_DATA']
except KeyError:
  VTK_DATA = '../../../vtkdata/'

argc = len(sys.argv)
print 'argc=',argc
#if argc &lt; 2:
#    print 'Usage: ',sys.argv[0],' &lt;ntps&gt;'
#    raise ValueError, 'Too few input args'

idx=1
npts = string.atoi(sys.argv[idx])
#npts = 6   # to match the hard-coded LUT below
idx=idx+1
print 'npts = ',npts

vmath = vtkMath()
#vmath.RandomSeed(1234)

# I can't stand the default red-&gt;blue; make a blue-&gt;red LUT
lut = vtkLookupTable()
#lut.SetHueRange(0.667,0.0)   # make a blue-&gt;red LUT
#lut.SetTableRange(double min,double max)
#lut.SetValueRange(double min,double max)

# actually - construct custom LUT (e.g. based on user's cell type colors)
lut.SetNumberOfTableValues(npts)
lut.SetNumberOfColors(npts)

# hard-coded
"""
lut.SetTableValue(0, 0,0,1,1)     # SetTableValue (vtkIdType indx, double r, double g, double b, double a=1.0)
lut.SetTableValue(1, 1,0,0,1)
lut.SetTableValue(2, 0,1,0,1)
lut.SetTableValue(3, 1,1,0,1)
lut.SetTableValue(4, 0,1,1,1)
lut.SetTableValue(5, 1,1,1,1)
"""

for idx in range(npts):
  lut.SetTableValue(idx, random(),random(),random(),1)

lut.Build()

pts = vtkPoints()
verts = vtkCellArray()

#center = (0,0,0)
#pts.InsertPoint(0,0,0,0)

scalars = vtkFloatArray()
scalars.SetNumberOfValues(npts)
scalars.SetName("cellType")

R = 1
for idx in range(0,npts):
  x = vmath.Random(-R,R)
  y = vmath.Random(-R,R)
  z = 0
  print idx,') x,y,z=',x,y,z
  scalars.SetValue(idx,idx)
  pts.InsertPoint(idx,x,y,z)
  verts.InsertNextCell( 1 )
  verts.InsertCellPoint(idx)

cellPD = vtkPolyData()
cellPD.SetPoints(pts)
cellPD.SetVerts(verts)

cellPD.Update()
#cellPD.GetCellData().SetScalars(scalars)
cellPD.GetPointData().SetScalars(scalars)

balls = vtkSphereSource()
balls.SetRadius(.1)
balls.SetPhiResolution(10)
balls.SetThetaResolution(10)

glyphPoints = vtkGlyph3D()
glyphPoints.SetInput(cellPD)
glyphPoints.SetSource(balls.GetOutput())
glyphPoints.SetScaleModeToDataScalingOff()

mapper = vtkPolyDataMapper()
mapper.SetInput(glyphPoints.GetOutput())
#mapper.SetScalarModeToUseCellFieldData()
#mapper.ScalarVisibilityOn()
#mapper.SetColorModeToMapScalars()
#mapper.SelectColorArray("cellType")
mapper.SetScalarRange(0,npts-1)
mapper.SetLookupTable(lut)
mapper.Update()

bds = cellPD.GetBounds()
print 'bds = ',bds

cellsActor = vtkActor()
cellsActor.SetMapper(mapper)

ren1 = vtkRenderer()
renWin = vtkRenderWindow()
renWin.AddRenderer(ren1)
iren = vtkRenderWindowInteractor()
iren.SetRenderWindow(renWin)

#------------------------
scalarBar = vtkScalarBarActor()
scalarBar.SetLookupTable(lut)
#scalarBar.SetTitle("Stress")
scalarBar.GetPositionCoordinate().SetCoordinateSystemToNormalizedViewport()
#scalarBar.GetPositionCoordinate().SetValue(0.8,0.05)
scalarBar.SetOrientationToVertical()
scalarBar.SetWidth(0.1)
scalarBar.SetHeight(0.9)
scalarBar.SetPosition(0.88,0.1)
#scalarBar.SetLabelFormat("%-#6.3f")
scalarBar.SetLabelFormat("%-#3.1f")
scalarBar.SetLabelFormat("")
scalarBar.SetLabelFormat(" ")
scalarBar.GetLabelTextProperty().SetColor(1,1,1)
#scalarBar.GetTitleTextProperty().SetColor(1,0,0)

# in viewport coords; i.e. not affected by window size
print 'sbar pos =',scalarBar.GetPosition()   # (0.88, 0.10000000000000001)
print 'sbar pos2 =',scalarBar.GetPosition2() # (0.10000000000000001, 0.90000000000000002) 
print 'sbar width =',scalarBar.GetWidth()    # 0.1
print 'sbar height =',scalarBar.GetHeight()  # 0.9

ren1.AddActor2D(scalarBar)

#-----------
# assume a vertical scalarbar along right-hand side of viewport
labelYDelta = scalarBar.GetHeight()/npts
labelYDelta = 0.8/npts
labelY0 =  0.15
labelX0 =  0.78

for idx in range(npts):
  myName = 'label' + str(idx)
  textActor = 'textActor' + str(idx)
  textActor = vtk.vtkTextActor()
  #textActor.ScaledTextOn()
  textActor.SetTextScaleModeToViewport() 
  #textActor.SetDisplayPosition(100, 100)  # integer coords
  #textActor.SetPosition(0.5, 0.5)  
  textActor.SetInput(myName)

  textActor.GetPositionCoordinate().SetCoordinateSystemToNormalizedViewport()
  textActor.GetPositionCoordinate().SetValue(labelX0, labelY0 + idx*labelYDelta)

  # Set coordinates to match the old vtkScaledTextActor default value
  #textActor.GetPosition2Coordinate().SetCoordinateSystemToNormalizedViewport()
  #textActor.GetPosition2Coordinate().SetValue(0.6, 0.1)
  #textActor.GetPosition2Coordinate().SetValue(0.8, 0.5)

  tprop = textActor.GetTextProperty()
  tprop.SetFontSize(12)
  tprop.SetFontFamilyToArial()

  #tprop.SetJustificationToCentered()
  #tprop.BoldOn()
  #tprop.ItalicOn()
  #tprop.ShadowOn()
  tprop.SetColor(1, 1, 1)

  ren1.AddActor2D(textActor)

#------------------------
ren1.AddActor(cellsActor)
#ren.SetBackground(1,1,1)
renWin.SetSize(300,300)
renWin.SetSize(400,400)

#ren.GetActiveCamera().Zoom(1.4)

renWin.Render()

w2i = vtkWindowToImageFilter()
w2i.SetInput(renWin)

jpgw = vtkJPEGWriter()
jpgw.SetInput(w2i.GetOutput())
jpgw.SetFileName("foobar.jpg")
#jpgw.Write()

#iren.Start()
</pre>
<p><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Image:ExtraFields_multiwin.png" class="image" title="Image:extraFields_multiwin.png"><img src="Labels_on_scalarbar_files/ExtraFields_multiwin.png" alt="Image:extraFields_multiwin.png" longdesc="/mediawiki1.7/index.php/Image:ExtraFields_multiwin.png" height="496" width="535"></a>
</p>
<p>
In the above image, we simply show what scalarbars might look like for 
various sized windows and scalar ranges.  It turns out that having 
exponential notation on one or more of the scalar values causes the font
 to be scaled down considerably (bad).  The bottom 2 windows are 
displaying 3D and 2D renderings of the "ExtraField scalar field that was
 computed in the Python steppable (in 
examples_PythonTutorial/ExtraFields).

</p><li>Back to <a href="http://old.compucell3d.org/mediawiki1.7/index.php/Heiland" title="Heiland">Heiland</a><p></p>

<!-- Saved in parser cache with key wikidb:pcache:idhash:237-0!1!0!0!!en!2 and timestamp 20120521202012 -->
<div class="printfooter">
Retrieved from "<a href="http://old.compucell3d.org/mediawiki1.7/index.php/Labels_on_scalarbar">http://old.compucell3d.org/mediawiki1.7/index.php/Labels_on_scalarbar</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</li></div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<ul>
				 <li id="ca-nstab-main" class="selected"><a title="View the content page [control-c]" accesskey="c" href="http://old.compucell3d.org/mediawiki1.7/index.php/Labels_on_scalarbar">Article</a></li>
				 <li id="ca-talk" class="new"><a title="Discussion about the content page [control-t]" accesskey="t" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Talk:Labels_on_scalarbar&amp;action=edit">Discussion</a></li>
				 <li id="ca-edit"><a title="You can edit this page. Please use the preview button before saving. [control-e]" accesskey="e" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Labels_on_scalarbar&amp;action=edit">Edit</a></li>
				 <li id="ca-history"><a title="Past versions of this page. [control-h]" accesskey="h" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Labels_on_scalarbar&amp;action=history">History</a></li>
		</ul>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a title="You are encouraged to log in, it is not mandatory however. [control-o]" accesskey="o" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Userlogin&amp;returnto=Labels_on_scalarbar">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div title="Main Page" class="portlet" id="p-logo">
		<a style="background-image: url(&quot;http://www.compucell3d.net/images/logo_trans.png&quot;);" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a title="Visit the Main Page [control-z]" accesskey="z" href="http://old.compucell3d.org/mediawiki1.7/index.php/Main_Page">Main Page</a></li>
				<li title="About the project, what you can do, where to find things" id="n-portal"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Community_Portal">Community portal</a></li>
				<li title="Find background information on current events" id="n-currentevents"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Current_events">Current events</a></li>
				<li id="n-recentchanges"><a title="The list of recent changes in the wiki. [control-r]" accesskey="r" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Recentchanges">Recent changes</a></li>
				<li id="n-randompage"><a title="Load a random page [control-x]" accesskey="x" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Random">Random page</a></li>
				<li title="The place to find out." id="n-help"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/Help:Contents">Help</a></li>
				<li title="Support us" id="n-sitesupport"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Site_support">Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/mediawiki1.7/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" accesskey="f" type="text">
				<input name="go" class="searchButton" id="searchGoButton" value="Go" type="submit">&nbsp;
				<input name="fulltext" class="searchButton" value="Search" type="submit">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a title="List of all wiki pages that link here [control-j]" accesskey="j" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Whatlinkshere&amp;target=Labels_on_scalarbar">What links here</a></li>
				<li id="t-recentchangeslinked"><a title="Recent changes in pages linked from this page [control-k]" accesskey="k" href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Special:Recentchangeslinked&amp;target=Labels_on_scalarbar">Related changes</a></li>
<li id="t-upload"><a title="Upload images or media files [control-u]" accesskey="u" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a title="List of all special pages [control-q]" accesskey="q" href="http://old.compucell3d.org/mediawiki1.7/index.php/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Labels_on_scalarbar&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="http://old.compucell3d.org/mediawiki1.7/index.php?title=Labels_on_scalarbar&amp;oldid=27234">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="Labels_on_scalarbar_files/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 13:50, 13 May 2011.</li>
				<li id="viewcount">This page has been accessed 83 times.</li>
				<li id="privacy"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:Privacy_policy" title="CompuCell3D Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:About" title="CompuCell3D Wiki:About">About CompuCell3D Wiki</a></li>
				<li id="disclaimer"><a href="http://old.compucell3d.org/mediawiki1.7/index.php/CompuCell3D_Wiki:General_disclaimer" title="CompuCell3D Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
	<script type="text/javascript"> if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served by babbage in 0.534 secs. -->

</body></html>